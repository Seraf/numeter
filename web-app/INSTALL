*******************
Installation
*******************

Debian packages
================

Build your own Debian packages with git-buildpackage or pbuilder for exemple or use numeter repo : http://repo.numeter.com (coming soon)
::

    apt-get install numeter-webapp

Manual
========

**Depends:**
    * django
    * django-tastypie
    * mimeparse

Django and tastypie setup
--------------------------


You need ``Django >= 1.5`` so you need at least ``wheezy-backports`` sources.

**From packages :** ::

  apt-get install -t wheezy-backports python-django python-tastypie python-mimeparse

Numeter Webapp setup
-----------------------

Get sources ::

    https://github.com/enovance/numeter

Launch the setup ::

    cd numeter/web-app
    python setup.py install

Configure
==========

Backend database
-----------------

**MySQL**

Install python requirements:  ::

    aptitude install mysql-server mysql-client
    aptitude install python-mysqldb

Create valid user and database: ::

    CREATE TABLE numeter;
    GRANT ALL ON numeter.* TO numeter@'localhost' IDENTIFIED BY 'yourpass';


**PostgreSQL**

(Available but not describe)


**Sqlite3** ::

    aptitude install sqlite3

.. note::
    With Sqlite you do not need to create database. Only choose a file which writable by django user.

Numeter webapp configuration
-----------------------------

Edit Webapp configuration file, follow comments inside for help ::

    vim /etc/numeter/numeter_webapp.cfg

If you are sure to have a good database configuration ::

    numeter-webapp syncdb

.. note::
    It will ask you to create a first superuser. If you choose 'no', it will be possible to make it with ``numeter-webapp add-user -S``.


Use a web front
---------------

You must choose your web frontend.

**Django embebbed webserver** ::

    numeter-webapp runserver 0.0.0.0:8000

.. warning::
    Not recommended in production environment.

**Apache**

Copy the site template in your apache configuration: ::

    cp extras/numeter-wsgi /etc/apache2/site-available/
    # For packaged setup /usr/share/doc/numeter/webapp/numeter-wsgi
    ln -s /etc/apache2/site-available/numeter-wsgi /etc/apache2/site-enabled/numeter-wsgi

Edit it for replace *@APP_DIR@* by Numeter webapp directory.

.. note::
    You can customize it for match with your security requirements.

**Nginx**

(Available but not describe)

Use memcached backend
----------------------

.. note::
    Cache is not mandatory

Install Memcached ::

    apt-get install memcached
    pip install python-memcached

Set 'use_cache' to True in numeter_webapp.cfg: ::

    sed -i /etc/numeter_webapp.cfg 's/use_cache.*=.*/use_cache = True/'

Set using settings in the same file.
